A seguir, apresento uma **versão atualizada** do texto (focando na seção de **Metodologia** e aprofundando a integração com o GPT4o**), incorporando os novos detalhes sobre o uso de prompts em formato JSON, a manutenção de sentenças anteriores pelo administrador do sistema, o tratamento de custos/tokens etc. Caso deseje, podemos futuramente unificar tudo em um único documento do TCC ou apenas inserir este conteúdo na seção específica de Metodologia.

---

## Metodologia ou Material e Métodos (Versão Atualizada)

### 1. Arquitetura Geral da Aplicação

A aplicação foi desenvolvida em **arquitetura cliente/servidor**, distribuída em dois contêineres Docker orquestrados via **Docker Compose**:

- **Contêiner Back-end**:  
  - Desenvolvido em Go (Golang).  
  - Integração com **PostgreSQL** para armazenamento de dados.  
  - **OCR** dos arquivos PDF por meio do **Tesseract**, instalado no mesmo contêiner.  
  - Exposição de uma **API REST** segura (HTTPS/TLS) para o front-end.  
  - Autenticação e autorização via **JWT** (accessToken de 15 minutos e refreshToken de 2 horas).

- **Contêiner Front-end**:  
  - Construído em **React** (empacotado com **Vite**).  
  - Servido de forma estática com auxílio de um **proxy reverso** (p. ex., Nginx) no mesmo contêiner.  
  - Acesso público por `https://www.wiseworld.com.br`, exigindo login para utilização de funcionalidades restritas.

#### Fluxo de OCR (Tesseract)  
1. **Upload do PDF** pelo usuário, que é armazenado na pasta `uploads` do contêiner back-end.  
2. **Conversão por OCR** (Tesseract) diretamente no back-end, gerando texto puro.  
3. **Armazenamento** do texto resultante em uma tabela do banco de dados PostgreSQL.  
4. **Exclusão** do arquivo PDF conforme regras (automático após extração ou mediante solicitação do usuário).

Esse fluxo foi escolhido por ser simples e direto, embora se considere futuramente isolar o OCR em um microserviço ou adotar filas de processamento, caso a demanda aumente.

### 2. Integração com o Modelo GPT4o

A parte de inteligência artificial generativa será responsável por analisar o texto proveniente do OCR e **gerar minutas** ou **análises** de documentos processuais. A integração segue as etapas abaixo:

#### 2.1 Forma de Acesso ao GPT4o
- Será consumida a **API de terceiros** fornecida pela **OpenAI** (sem hospedagem local).  
- As requisições ao GPT4o serão feitas por meio de HTTPS/TLS, utilizando **chaves de API** armazenadas de forma segura no back-end.  

#### 2.2 Estratégia de Fine-Tuning ou Prompting
- **Fine-Tuning**: Não será realizado.  
- **Prompts Personalizados**: A abordagem concentra-se em prompts cuidadosamente elaborados, que orientam o GPT4o a produzir respostas em **formato JSON**.  
  - **Exemplo de Prompt** (ilustrativo):  
    ```json
    {
      "role": "system",
      "content": "Você é um assistente jurídico virtual. Considere as informações processuais a seguir e retorne um JSON com os campos [tipoDocumento, partes, pedidos, fundamentos, jurisprudencia, observacoes]."
    }
    {
      "role": "user",
      "content": "Texto extraído do OCR: [trecho da petição inicial]. Jurisprudência disponível: [trecho da jurisprudência selecionada]."
    }
    ```
  - A resposta esperada deverá seguir o formato JSON, facilitando o pós-processamento pela aplicação.

#### 2.3 Pré-Processamento e Normalização
- O texto enviado ao GPT4o já terá passado pela fase de **OCR** (sem pré-processamento adicional, como correção de ruído ou layout).  
- **Filtragem de Conteúdo**: Planeja-se **remover ou anonimizar** dados sensíveis (nomes das partes, endereços, etc.) caso exista preocupação de privacidade ou LGPD.  
- **Identificação do Documento**: O prompt incluirá indicações de que se trata de uma petição inicial, contestação, sentença prévia etc., para melhor contextualizar o GPT4o.

#### 2.4 Construção e Uso de Prompts
- **Base de Sentenças Anteriores**: O sistema manterá um cadastro de minutas e sentenças já proferidas (organizadas por assunto e fundamentação). O **administrador** (juiz) decidirá quais sentenças servem de exemplo no prompt, evitando textos ultrapassados ou contraditórios.  
- **Seções JSON**: Para gerar uma minuta de sentença, o prompt especificará campos como “Fatos do caso”, “Pedido do autor”, “Fundamentação legal”, “Parte dispositiva” etc. O GPT4o retornará um JSON populado, que o back-end converterá em um rascunho de sentença.  
- **Controle de Citações**: Para evitar citação de jurisprudências inexistentes, somente serão fornecidos ao modelo fragmentos de jurisprudência previamente selecionados e autorizados pelo administrador.

#### 2.5 Validação de Respostas e Edição Humana
- No momento, **não** há um mecanismo automático de pontuação ou ranking da qualidade das respostas geradas pelo GPT4o.  
- A validação final é feita **manualmente** pelo juiz ou assessor, que verifica se a fundamentação está correta e coerente.  
- Caso ocorra “alucinação” do modelo (ex.: referências a dispositivos legais inexistentes), o operador poderá **descartar** ou **corrigir** o texto, garantindo a responsabilização humana pela decisão judicial.

#### 2.6 Custos e Limites de API
- A análise de custos de tokens e limites de requisições será considerada em eventual implantação em produção.  
- Para contornar o limite de tamanho de prompt e tornar as requisições mais eficientes, planeja-se **quebrar** documentos extensos em partes ou **filtrar** apenas o texto relevante (p. ex., identificar automaticamente as seções importantes da petição inicial).

### 3. Resultados Esperados com a Integração de IA Generativa

- **Celeridade na Emissão de Minutas**: A IA pode oferecer um rascunho bem estruturado, reduzindo o tempo de elaboração inicial.  
- **Padronização**: Ao aproveitar a base de sentenças consolidadas, há maior uniformidade na fundamentação, especialmente em ações consumeristas semelhantes.  
- **Facilidade de Uso**: O retorno em formato JSON simplifica o manuseio programático dos dados, possibilitando a geração de textos finais ou relatórios de forma flexível.

### 4. Limitações e Perspectivas Futuras

- **Limitações do GPT4o**: Mesmo com prompts elaborados, o modelo pode cometer erros ou “inventar” referências.  
- **Evolução para Modelos Locais**: Se surgirem LLMs open-source especialmente treinadas em Direito brasileiro, o projeto pode considerar migrar parte do processamento on-premise, minimizando riscos de sigilo.  
- **Ampliação do Escopo**: Em versões futuras, a ferramenta poderá incorporar campos adicionais (p. ex., cálculo de indenizações, verificação de prazos prescricionais) e suportar fluxos mais complexos.

---

### Exemplo Simplificado de Prompt para Identificação de Documentos

```jsonc
{
  "role": "system",
  "content": "Você é um assistente jurídico especializado em ações consumeristas. Ao receber um texto, identifique se é petição inicial, contestação, sentença ou outro tipo de documento. Retorne um JSON com o campo 'tipoDocumento' (ex: 'peticao_inicial'), 'partes' (listagem de autor e réu), 'fundamentos' e 'jurisprudencia'."
},
{
  "role": "user",
  "content": "Texto extraído do OCR: 'O Autor ajuizou a presente demanda em face da Empresa X alegando falha na prestação de serviço...'"
}
```

**Resposta Esperada do GPT4o** (exemplo hipotético):

```jsonc
{
  "tipoDocumento": "peticao_inicial",
  "partes": {
    "autor": "Nome do Autor",
    "reu": "Empresa X"
  },
  "fundamentos": "Falha na prestação de serviços...",
  "jurisprudencia": "Enunciado de Súmula 123, Tribunal Y..."
}
```

Esse tipo de estrutura facilita a manipulação posterior dos dados, seja para exibir informações ao usuário, seja para alimentar algoritmos de classificação ou geração de minutas de sentença.

---

## Considerações Finais sobre a Metodologia

A metodologia descrita reflete um **caráter aplicado** conforme exigência dos TCCs dos cursos de especialização, pois conjuga desenvolvimento de software (com uso de Docker, OCR, API REST) e técnicas de IA para fins de automação judicial. Embora ainda se encontre em estágio preliminar de desenvolvimento e validação, o projeto visa demonstrar que o **uso de IA generativa** em cenários repetitivos, como as ações consumeristas, pode agilizar a confecção de minutas e otimizar o tempo de magistrados e servidores.

Em síntese:

1. **Estrutura Cliente/Servidor** via Docker, com OCR local.  
2. **Integração com GPT4o** por API, privilegiando prompts personalizados em formato JSON.  
3. **Validação Humana** fundamental, mantendo-se a responsabilidade final do julgador.  
4. **Perspectiva de Evolução** no sentido de maior robustez, escalabilidade e conformidade legal.

Caso surjam novas necessidades (por exemplo, automação de backup, políticas de log rotation, uso de fine-tuning do modelo, adoção de bases jurisprudenciais vetoriais), a arquitetura aqui apresentada poderá ser expandida e ajustada ao longo das etapas subsequentes da pesquisa.

---

**(Esta seção pode ser inserida ou adaptada no seu TCC, conforme o formato exigido pelo programa. Se desejar unificá-la à seção de “Introdução”, “Resultados Preliminares” ou outras partes, basta sinalizar e ajustamos a redação para a versão final.)**
