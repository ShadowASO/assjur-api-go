          ┌────────────────────────────────────────────┐
          │ Início: pipelineAnaliseProcesso(ctx, id_ctxt, msgs, prevID) │
          └────────────────────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Log: "Iniciando pipelineAnaliseProcesso..." │
          └────────────────────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Recupera autos processuais via retriObj.RecuperaAutosProcesso │
          └────────────────────────────────────────────┘
                              │
               ┌──────────────┴──────────────┐
               ▼                             ▼
   ┌────────────────────────────┐   ┌────────────────────────────┐
   │ Autos encontrados           │   │ Erro ou lista vazia        │
   │ (len > 0)                   │   │ → retorna erro             │
   └────────────────────────────┘   └────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Recupera pré-análise via retriObj.RecuperaPreAnaliseJuridica │
          └────────────────────────────────────────────┘
                              │
               ┌──────────────┴──────────────┐
               ▼                             ▼
   ┌────────────────────────────┐   ┌────────────────────────────┐
   │ Pré-análise encontrada     │   │ Nenhuma pré-análise         │
   │ → Define natuAnalise=IA_ANALISE │   │ → Define natuAnalise=IA_PREANALISE │
   │ e busca RAG base           │   │ e ragBase = []             │
   └────────────────────────────┘   └────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Recupera base de conhecimentos (RAG)       │
          │ retriObj.RecuperaBaseConhecimentos         │
          └────────────────────────────────────────────┘
                              │
               ┌──────────────┴──────────────┐
               ▼                             ▼
   ┌────────────────────────────┐   ┌────────────────────────────┐
   │ RAG encontrado (len > 0)   │   │ Nenhum documento RAG        │
   │ → Prossegue                 │   │ → Loga "Nenhuma doutrina"  │
   └────────────────────────────┘   └────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Executa análise jurídica via genObj.ExecutaAnaliseProcesso │
          └────────────────────────────────────────────┘
                              │
               ┌──────────────┴──────────────┐
               ▼                             ▼
   ┌────────────────────────────┐   ┌────────────────────────────┐
   │ Resposta retornada         │   │ Erro de execução IA         │
   └────────────────────────────┘   └────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Concatena texto da resposta (output → docJson) │
          └────────────────────────────────────────────┘
                              │
               ┌──────────────┴──────────────┐
               ▼                             ▼
   ┌────────────────────────────┐   ┌────────────────────────────┐
   │ docJson não vazio          │   │ docJson vazio               │
   │ → continua                 │   │ → retorna erro              │
   └────────────────────────────┘   └────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Faz unmarshal(docJson → objAnalise)        │
          └────────────────────────────────────────────┘
                              │
               ┌──────────────┴──────────────┐
               ▼                             ▼
   ┌────────────────────────────┐   ┌────────────────────────────┐
   │ JSON válido                │   │ Erro no unmarshal           │
   └────────────────────────────┘   └────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Adiciona DataGeracao se ausente            │
          └────────────────────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Serializa novamente (MarshalIndent)        │
          └────────────────────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Salva análise via service.salvarAnaliseProcesso │
          └────────────────────────────────────────────┘
                              │
               ┌──────────────┴──────────────┐
               ▼                             ▼
   ┌────────────────────────────┐   ┌────────────────────────────┐
   │ Sucesso                    │   │ Falha ao salvar             │
   │ → retorna ID, output, nil  │   │ → retorna erro              │
   └────────────────────────────┘   └────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Log: "Finalizando pipelineAnaliseProcesso" │
          └────────────────────────────────────────────┘
                              │
                              ▼
          ┌────────────────────────────────────────────┐
          │ Retorna (ID, output, nil)                  │
          └────────────────────────────────────────────┘

