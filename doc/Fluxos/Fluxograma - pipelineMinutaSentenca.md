                 ┌────────────────────────────────────────────┐
                 │ Início: pipelineMinutaSentenca(ctx, id_ctxt, msgs, prevID) │
                 └────────────────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Log: "Iniciando pipelineProcessaSentenca..." │
                 └────────────────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Recupera Análise Jurídica via retriObj.RecuperaAnaliseJuridica │
                 └────────────────────────────────────────────┘
                                    │
                  ┌─────────────────┴─────────────────┐
                  ▼                                   ▼
 ┌────────────────────────────────┐    ┌────────────────────────────────┐
 │ Análise encontrada (len > 0)   │    │ Nenhuma análise → retorna erro  │
 └────────────────────────────────┘    └────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Verifica Questões Controvertidas            │
                 │ genObj.VerificaQuestoesControvertidas(...)  │
                 └────────────────────────────────────────────┘
                                    │
                  ┌─────────────────┴──────────────────┐
                  ▼                                   ▼
 ┌────────────────────────────────┐    ┌────────────────────────────────┐
 │ Código 301 → há questões       │    │ Código 202 → verificação OK     │
 │ controvertidas → aguarda       │    │ prossegue para geração sentença │
 │ complementação → retorna        │    │                                │
 └────────────────────────────────┘    └────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Recupera Autos Processuais via retriObj.RecuperaAutosProcesso │
                 └────────────────────────────────────────────┘
                                    │
                  ┌─────────────────┴─────────────────┐
                  ▼                                   ▼
 ┌────────────────────────────────┐    ┌────────────────────────────────┐
 │ Autos encontrados (len > 0)    │    │ Nenhum auto → retorna erro     │
 └────────────────────────────────┘    └────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Recupera base RAG via retriObj.RecuperaBaseConhecimentos │
                 └────────────────────────────────────────────┘
                                    │
                  ┌─────────────────┴─────────────────┐
                  ▼                                   ▼
 ┌────────────────────────────────┐    ┌────────────────────────────────┐
 │ Base RAG encontrada            │    │ Nenhuma doutrina encontrada    │
 │ → continua                     │    │ (apenas log informativo)       │
 └────────────────────────────────┘    └────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Executa geração da minuta via genObj.ExecutaAnaliseJulgamento │
                 └────────────────────────────────────────────┘
                                    │
                  ┌─────────────────┴─────────────────┐
                  ▼                                   ▼
 ┌────────────────────────────────┐    ┌────────────────────────────────┐
 │ Retorno recebido da IA         │    │ Erro durante execução → log e  │
 │ (output com JSON)              │    │ retorno de erro                │
 └────────────────────────────────┘    └────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Extrai texto da resposta (docJson)         │
                 └────────────────────────────────────────────┘
                                    │
                  ┌─────────────────┴─────────────────┐
                  ▼                                   ▼
 ┌────────────────────────────────┐    ┌────────────────────────────────┐
 │ docJson não vazio              │    │ docJson vazio → retorna erro   │
 └────────────────────────────────┘    └────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Faz Unmarshal → objMinuta (MinutaSentenca) │
                 └────────────────────────────────────────────┘
                                    │
                  ┌─────────────────┴─────────────────┐
                  ▼                                   ▼
 ┌────────────────────────────────┐    ┌────────────────────────────────┐
 │ JSON válido                    │    │ Erro no unmarshal → retorna    │
 │ (objMinuta preenchido)         │    │ erro                           │
 └────────────────────────────────┘    └────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Define DataGeracao atual se ausente        │
                 │ (time.Now().Format("02/01/2006 15:04:05")) │
                 └────────────────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Serializa novamente (MarshalIndent)        │
                 └────────────────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Salva minuta via salvarMinutaSentenca      │
                 │ (EventosServiceGlobal.InserirEvento)       │
                 └────────────────────────────────────────────┘
                                    │
                  ┌─────────────────┴─────────────────┐
                  ▼                                   ▼
 ┌────────────────────────────────┐    ┌────────────────────────────────┐
 │ Sucesso ao salvar minuta        │    │ Falha ao salvar minuta → erro  │
 │ → retorna (ID, output, nil)     │    └────────────────────────────────┘
 └────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Log: "Finalizando pipelineProcessaSentenca" │
                 └────────────────────────────────────────────┘
                                    │
                                    ▼
                 ┌────────────────────────────────────────────┐
                 │ Retorna ID, output, nil                   │
                 └────────────────────────────────────────────┘

